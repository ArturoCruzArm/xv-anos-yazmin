<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrativo - XV A√±os</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .admin-panel {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(212, 175, 55, 0.3);
            margin: 20px auto;
        }

        .admin-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--gold);
        }

        .admin-header h1 {
            color: var(--dark-gold);
            font-size: 32px;
            margin-bottom: 10px;
        }

        .admin-header p {
            color: var(--text-dark);
            font-size: 14px;
        }

        .admin-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(212, 175, 55, 0.05);
            border-radius: 10px;
            border-left: 4px solid var(--gold);
        }

        .admin-section h2 {
            color: var(--dark-gold);
            font-size: 18px;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--dark-gold);
            font-weight: bold;
            font-size: 13px;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--gold);
            border-radius: 5px;
            font-family: inherit;
            font-size: 13px;
            color: var(--text-dark);
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--dark-gold);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn-admin {
            padding: 10px 20px;
            background: var(--gold);
            color: #000;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 13px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            margin-right: 10px;
        }

        .btn-admin:hover {
            background: var(--light-gold);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            color: var(--gold);
            border: 1px solid var(--gold);
        }

        .btn-secondary:hover {
            background: var(--gold);
            color: #000;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .success-message {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            display: none;
        }

        .error-message {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            display: none;
        }

        .price-display {
            font-size: 20px;
            color: var(--dark-gold);
            font-weight: bold;
            margin-top: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border: 2px solid var(--gold);
        }

        .security-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 13px;
            line-height: 1.6;
        }

        @media (max-width: 600px) {
            .admin-panel {
                padding: 20px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }

            .btn-admin {
                width: 100%;
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="admin-panel">
            <!-- Encabezado -->
            <div class="admin-header">
                <h1>‚öôÔ∏è Panel Administrativo</h1>
                <p>Personalizaci√≥n del Evento - XV A√±os</p>
            </div>

            <!-- Advertencia de seguridad -->
            <div class="security-warning">
                ‚ö†Ô∏è <strong>Nota de Seguridad:</strong> Este panel es para uso administrativo √∫nicamente. No compartas este archivo con personas no autorizadas. Los datos introducidos se guardan en el navegador (localStorage).
            </div>

            <!-- Mensajes -->
            <div class="success-message" id="successMsg">‚úÖ Cambios guardados exitosamente</div>
            <div class="error-message" id="errorMsg">‚ùå Error al procesar los cambios</div>

            <!-- Informaci√≥n de la Quincea√±era -->
            <div class="admin-section">
                <h2>üëó Informaci√≥n de la Quincea√±era</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label>Nombre Completo</label>
                        <input type="text" id="quinceaneraName" placeholder="Geraldine Guadalupe Villegas">
                    </div>
                    <div class="form-group">
                        <label>Nombre de la Madre/Tutora</label>
                        <input type="text" id="motherName" placeholder="Elida Villegas">
                    </div>
                </div>
                <div class="form-group">
                    <label>Color del Vestido (c√≥digo hexadecimal)</label>
                    <input type="color" id="dressColor" value="#D4AF37">
                </div>
            </div>

            <!-- Informaci√≥n del Evento -->
            <div class="admin-section">
                <h2>üìÖ Informaci√≥n del Evento</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label>Fecha del Evento (DD/MM/YYYY)</label>
                        <input type="text" id="eventDate" placeholder="31/12/2025">
                    </div>
                </div>
            </div>

            <!-- Ceremonia Religiosa -->
            <div class="admin-section">
                <h2>‚õ™ Ceremonia Religiosa</h2>
                <div class="form-group">
                    <label>Ubicaci√≥n de la Iglesia/Templo</label>
                    <input type="text" id="ceremonyLocation" placeholder="Parroquia Principal de Nuestra Se√±ora de los Dolores">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Ciudad</label>
                        <input type="text" id="ceremonyCity" placeholder="Dolores Hidalgo, Guanajuato">
                    </div>
                    <div class="form-group">
                        <label>Hora (HH:MM)</label>
                        <input type="time" id="ceremonyTime" value="14:00">
                    </div>
                </div>
            </div>

            <!-- Informaci√≥n de la Fiesta -->
            <div class="admin-section">
                <h2>üéâ Informaci√≥n de la Fiesta</h2>
                <div class="form-group">
                    <label>Nombre del Sal√≥n</label>
                    <input type="text" id="partyLocation" placeholder="Sal√≥n El Jard√≠n de Aurora">
                </div>
                <div class="form-group">
                    <label>Distancia/Descripci√≥n</label>
                    <input type="text" id="partyDistance" placeholder="A 5 minutos de la Parroquia">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Hora de Inicio (HH:MM)</label>
                        <input type="time" id="partyStartTime" value="16:00">
                    </div>
                    <div class="form-group">
                        <label>Hora de T√©rmino (HH:MM)</label>
                        <input type="time" id="partyEndTime" value="23:00">
                    </div>
                </div>
            </div>

            <!-- Paquete Fotogr√°fico -->
            <div class="admin-section">
                <h2>üì∏ Paquete Fotogr√°fico y Pagos</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label>Fotograf√≠a y Video ($)</label>
                        <input type="number" id="packagePrice" value="6000" min="0">
                    </div>
                    <div class="form-group">
                        <label>Servicio de Dron ($)</label>
                        <input type="number" id="packageDrone" value="500" min="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Vi√°ticos ($)</label>
                        <input type="number" id="packageViatics" value="500" min="0">
                    </div>
                    <div class="form-group">
                        <label>Invitaci√≥n Web ($)</label>
                        <input type="number" id="packageWeb" value="500" min="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Anticipo Pagado ($)</label>
                        <input type="number" id="depositPaid" value="2000" min="0">
                    </div>
                </div>
                <div class="price-display">
                    Subtotal: $<span id="subtotalPrice">7500</span> MXN<br>
                    <span style="font-size: 14px; color: #4caf50;">Anticipo: -$<span id="depositDisplay">2000</span></span><br>
                    <span style="font-weight: bold;">Saldo a Pagar: $<span id="totalPrice">5500</span> MXN</span>
                </div>
            </div>

            <!-- Informaci√≥n de Contacto -->
            <div class="admin-section">
                <h2>üìû Informaci√≥n de Contacto</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label>Nombre del Fot√≥grafo</label>
                        <input type="text" id="photographerName" placeholder="(Por definir)">
                    </div>
                    <div class="form-group">
                        <label>Tel√©fono</label>
                        <input type="tel" id="photographerPhone" placeholder="+52 (XXX) XXX-XXXX">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="photographerEmail" placeholder="foto@ejemplo.com">
                    </div>
                    <div class="form-group">
                        <label>Sitio Web</label>
                        <input type="url" id="photographerWebsite" placeholder="https://ejemplo.com">
                    </div>
                </div>
            </div>

            <!-- Botones de Acci√≥n -->
            <div class="button-group">
                <button class="btn-admin" onclick="saveConfiguration()">üíæ Guardar Cambios</button>
                <button class="btn-admin btn-secondary" onclick="loadConfiguration()">üîÑ Recargar</button>
                <button class="btn-admin btn-secondary" onclick="exportConfiguration()">üì• Exportar Config</button>
                <button class="btn-admin btn-secondary" onclick="window.location.href='index.html'">üëÅÔ∏è Ver Sitio</button>
                <button class="btn-admin btn-danger" onclick="resetConfiguration()">üîÑ Restablecer</button>
            </div>

            <div class="button-group" style="margin-top: 20px;">
                <button class="btn-admin btn-secondary" onclick="window.location.href='index.html'">‚Üê Volver a la Invitaci√≥n</button>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script>
        // Cargar configuraci√≥n al abrir la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            loadConfiguration();

            // Actualizar precio total cuando cambian los valores
            document.getElementById('packagePrice').addEventListener('change', updateTotalPrice);
            document.getElementById('packageDrone').addEventListener('change', updateTotalPrice);
            document.getElementById('packageViatics').addEventListener('change', updateTotalPrice);
            document.getElementById('packageWeb').addEventListener('change', updateTotalPrice);
            document.getElementById('depositPaid').addEventListener('change', updateTotalPrice);
        });

        // Cargar configuraci√≥n en los campos
        function loadConfiguration() {
            document.getElementById('quinceaneraName').value = EVENT_CONFIG.quinceaneraName;
            document.getElementById('motherName').value = EVENT_CONFIG.motherName;
            document.getElementById('dressColor').value = EVENT_CONFIG.dressColor;
            document.getElementById('eventDate').value = EVENT_CONFIG.eventDate;

            document.getElementById('ceremonyLocation').value = EVENT_CONFIG.ceremonyLocation;
            document.getElementById('ceremonyCity').value = EVENT_CONFIG.ceremonyCity;
            document.getElementById('ceremonyTime').value =
                String(EVENT_CONFIG.ceremonyHour).padStart(2, '0') + ':' +
                String(EVENT_CONFIG.ceremonyMinute).padStart(2, '0');

            document.getElementById('partyLocation').value = EVENT_CONFIG.partyLocation;
            document.getElementById('partyDistance').value = EVENT_CONFIG.partyDistance;
            document.getElementById('partyStartTime').value =
                String(EVENT_CONFIG.partyStartHour).padStart(2, '0') + ':' +
                String(EVENT_CONFIG.partyStartMinute).padStart(2, '0');
            document.getElementById('partyEndTime').value =
                String(EVENT_CONFIG.partyEndHour).padStart(2, '0') + ':' +
                String(EVENT_CONFIG.partyEndMinute).padStart(2, '0');

            document.getElementById('packagePrice').value = EVENT_CONFIG.package.price;
            document.getElementById('packageDrone').value = EVENT_CONFIG.package.drone;
            document.getElementById('packageViatics').value = EVENT_CONFIG.package.viatics;
            document.getElementById('packageWeb').value = EVENT_CONFIG.package.webInvitation;
            document.getElementById('depositPaid').value = EVENT_CONFIG.payments.deposit;

            document.getElementById('photographerName').value = EVENT_CONFIG.contact.photographer;
            document.getElementById('photographerPhone').value = EVENT_CONFIG.contact.phone;
            document.getElementById('photographerEmail').value = EVENT_CONFIG.contact.email;
            document.getElementById('photographerWebsite').value = EVENT_CONFIG.contact.website;

            updateTotalPrice();
        }

        // Guardar configuraci√≥n
        function saveConfiguration() {
            try {
                EVENT_CONFIG.quinceaneraName = document.getElementById('quinceaneraName').value;
                EVENT_CONFIG.motherName = document.getElementById('motherName').value;
                EVENT_CONFIG.dressColor = document.getElementById('dressColor').value;
                EVENT_CONFIG.eventDate = document.getElementById('eventDate').value;

                EVENT_CONFIG.ceremonyLocation = document.getElementById('ceremonyLocation').value;
                EVENT_CONFIG.ceremonyCity = document.getElementById('ceremonyCity').value;

                const ceremonyTime = document.getElementById('ceremonyTime').value.split(':');
                EVENT_CONFIG.ceremonyHour = parseInt(ceremonyTime[0]);
                EVENT_CONFIG.ceremonyMinute = parseInt(ceremonyTime[1]);

                EVENT_CONFIG.partyLocation = document.getElementById('partyLocation').value;
                EVENT_CONFIG.partyDistance = document.getElementById('partyDistance').value;

                const partyStart = document.getElementById('partyStartTime').value.split(':');
                EVENT_CONFIG.partyStartHour = parseInt(partyStart[0]);
                EVENT_CONFIG.partyStartMinute = parseInt(partyStart[1]);

                const partyEnd = document.getElementById('partyEndTime').value.split(':');
                EVENT_CONFIG.partyEndHour = parseInt(partyEnd[0]);
                EVENT_CONFIG.partyEndMinute = parseInt(partyEnd[1]);

                EVENT_CONFIG.package.price = parseInt(document.getElementById('packagePrice').value);
                EVENT_CONFIG.package.drone = parseInt(document.getElementById('packageDrone').value);
                EVENT_CONFIG.package.viatics = parseInt(document.getElementById('packageViatics').value);
                EVENT_CONFIG.package.webInvitation = parseInt(document.getElementById('packageWeb').value);
                EVENT_CONFIG.payments.deposit = parseInt(document.getElementById('depositPaid').value);
                EVENT_CONFIG.payments.subtotal = EVENT_CONFIG.package.price + EVENT_CONFIG.package.drone + EVENT_CONFIG.package.viatics + EVENT_CONFIG.package.webInvitation;
                EVENT_CONFIG.payments.balance = EVENT_CONFIG.payments.subtotal - EVENT_CONFIG.payments.deposit;

                EVENT_CONFIG.contact.photographer = document.getElementById('photographerName').value;
                EVENT_CONFIG.contact.phone = document.getElementById('photographerPhone').value;
                EVENT_CONFIG.contact.email = document.getElementById('photographerEmail').value;
                EVENT_CONFIG.contact.website = document.getElementById('photographerWebsite').value;

                // Guardar en localStorage
                localStorage.setItem('eventConfig', JSON.stringify(EVENT_CONFIG));

                showMessage('success', '‚úÖ Configuraci√≥n guardada exitosamente');
                setTimeout(() => hideMessage('success'), 3000);
            } catch (error) {
                console.error('Error al guardar:', error);
                showMessage('error', '‚ùå Error al guardar la configuraci√≥n');
            }
        }

        // Actualizar precio total
        function updateTotalPrice() {
            const price = parseInt(document.getElementById('packagePrice').value) || 0;
            const drone = parseInt(document.getElementById('packageDrone').value) || 0;
            const viatics = parseInt(document.getElementById('packageViatics').value) || 0;
            const web = parseInt(document.getElementById('packageWeb').value) || 0;
            const deposit = parseInt(document.getElementById('depositPaid').value) || 0;
            const subtotal = price + drone + viatics + web;
            const balance = subtotal - deposit;
            document.getElementById('subtotalPrice').textContent = subtotal.toLocaleString();
            document.getElementById('depositDisplay').textContent = deposit.toLocaleString();
            document.getElementById('totalPrice').textContent = balance.toLocaleString();
        }

        // Exportar configuraci√≥n
        function exportConfiguration() {
            const dataStr = JSON.stringify(EVENT_CONFIG, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `config-xvanos-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
        }

        // Restablecer configuraci√≥n
        function resetConfiguration() {
            if (confirm('¬øEst√°s seguro? Esto eliminar√° todos los cambios realizados.')) {
                localStorage.removeItem('eventConfig');
                location.reload();
            }
        }

        // Mostrar mensajes
        function showMessage(type, message) {
            const element = document.getElementById(type + 'Msg');
            element.textContent = message;
            element.style.display = 'block';
        }

        function hideMessage(type) {
            document.getElementById(type + 'Msg').style.display = 'none';
        }
    </script>
</body>
</html>
